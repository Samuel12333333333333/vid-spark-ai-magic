
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartVideofy - AI-Powered Video Generator</title>
    <meta name="description" content="Transform text into stunning videos with AI. SmartVideofy helps creators, marketers, educators, and startups bring their ideas to life with professional quality videos." />
    <meta name="author" content="SmartVideofy" />

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="SmartVideofy - AI-Powered Video Generator" />
    <meta property="og:description" content="Transform text into stunning videos with AI in minutes, not hours. No design skills required." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://smartvideofy.com/" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@smartvideofy" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "SmartVideofy",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "description": "AI-powered video generation platform that transforms text into stunning videos in minutes"
      }
    </script>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://smartvideofy.com/" />
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" />
    
    <!-- Sitemap Reference -->
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Chat Widget -->
    <div id="chat-widget-container" style="display:none; position:fixed; bottom:20px; right:20px; z-index:9999;">
      <div id="chat-popup" style="display:none; width:300px; max-height:400px; background:white; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.2); overflow:hidden; margin-bottom:10px;">
        <div style="background:#6366F1; color:white; padding:10px; display:flex; justify-content:space-between; align-items:center;">
          <span>SmartVid Assistant</span>
          <button id="close-chat" style="background:none; border:none; color:white; cursor:pointer;">Ã—</button>
        </div>
        <div id="chat-messages" style="height:300px; overflow-y:auto; padding:10px;"></div>
        <div style="padding:10px; border-top:1px solid #eee; display:flex;">
          <input id="chat-input" type="text" placeholder="Type your message..." style="flex:1; padding:8px; border:1px solid #ddd; border-radius:4px; margin-right:5px;">
          <button id="send-message" style="background:#6366F1; color:white; border:none; border-radius:4px; padding:8px 12px; cursor:pointer;">Send</button>
        </div>
      </div>
      <button id="chat-button" style="background:#6366F1; color:white; border:none; border-radius:50%; width:60px; height:60px; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:0 2px 10px rgba(0,0,0,0.2);">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
      </button>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const chatButton = document.getElementById('chat-button');
        const chatPopup = document.getElementById('chat-popup');
        const closeChat = document.getElementById('close-chat');
        const chatInput = document.getElementById('chat-input');
        const sendMessage = document.getElementById('send-message');
        const chatMessages = document.getElementById('chat-messages');
        const chatWidgetContainer = document.getElementById('chat-widget-container');
        
        // Only show chat widget on landing and marketing pages, not on dashboard
        function updateChatWidgetVisibility() {
          const path = window.location.pathname;
          const isMarketingPage = path === '/' || 
                                 !path.startsWith('/dashboard') && 
                                 !path.startsWith('/login') && 
                                 !path.startsWith('/register');
          
          chatWidgetContainer.style.display = isMarketingPage ? 'block' : 'none';
        }
        
        // Initialize visibility
        updateChatWidgetVisibility();
        
        // Listen for route changes (for SPA)
        const pushState = history.pushState;
        history.pushState = function() {
          pushState.apply(history, arguments);
          updateChatWidgetVisibility();
        };
        
        window.addEventListener('popstate', updateChatWidgetVisibility);
        
        // Toggle chat popup
        chatButton.addEventListener('click', function() {
          if (chatPopup.style.display === 'none') {
            chatPopup.style.display = 'block';
            // Add welcome message if this is the first time
            if (chatMessages.children.length === 0) {
              addMessage('Hi! I\'m your SmartVid assistant. How can I help you create amazing videos today?', false);
            }
          } else {
            chatPopup.style.display = 'none';
          }
        });
        
        // Close chat popup
        closeChat.addEventListener('click', function() {
          chatPopup.style.display = 'none';
        });
        
        // Send message on Enter key
        chatInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            sendUserMessage();
          }
        });
        
        // Send message on button click
        sendMessage.addEventListener('click', sendUserMessage);
        
        function sendUserMessage() {
          const message = chatInput.value.trim();
          if (!message) return;
          
          // Display user message
          addMessage(message, true);
          chatInput.value = '';
          
          // Show typing indicator
          const typingIndicator = document.createElement('div');
          typingIndicator.id = 'typing-indicator';
          typingIndicator.innerHTML = 'Typing...';
          typingIndicator.style.color = '#888';
          typingIndicator.style.fontStyle = 'italic';
          typingIndicator.style.padding = '5px';
          chatMessages.appendChild(typingIndicator);
          chatMessages.scrollTop = chatMessages.scrollHeight;
          
          // Send to webhook
          fetch('https://smartvid.app.n8n.cloud/webhook/f406671e-c954-4691-b39a-66c90aa2f103/chat', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({ message: message }),
          })
          .then(response => {
            if (!response.ok) {
              throw new Error(`Server responded with status: ${response.status}`);
            }
            return response.json();
          })
          .then(data => {
            // Remove typing indicator
            document.getElementById('typing-indicator').remove();
            
            // Add bot response
            addMessage(data.reply || 'Thanks for your message!', false);
          })
          .catch(error => {
            // Remove typing indicator
            if (document.getElementById('typing-indicator')) {
              document.getElementById('typing-indicator').remove();
            }
            
            // Add error message
            addMessage('Sorry, I\'m having trouble connecting right now. Please try again later.', false);
            console.error('Chat error:', error);
          });
        }
        
        function addMessage(text, isUser) {
          const messageElement = document.createElement('div');
          messageElement.style.marginBottom = '10px';
          messageElement.style.padding = '8px 12px';
          messageElement.style.borderRadius = '18px';
          messageElement.style.maxWidth = '80%';
          messageElement.style.wordWrap = 'break-word';
          
          if (isUser) {
            messageElement.style.backgroundColor = '#6366F1';
            messageElement.style.color = 'white';
            messageElement.style.marginLeft = 'auto';
            messageElement.style.borderBottomRightRadius = '4px';
          } else {
            messageElement.style.backgroundColor = '#f1f1f1';
            messageElement.style.color = '#333';
            messageElement.style.marginRight = 'auto';
            messageElement.style.borderBottomLeftRadius = '4px';
          }
          
          messageElement.textContent = text;
          chatMessages.appendChild(messageElement);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }
      });
    </script>
  </body>
</html>
